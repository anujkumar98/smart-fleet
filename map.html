<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Map</title>

</head>
<body style="overflow-x:hidden; background: #6f8bf0;">
    <div class="display-4  d-flex justify-content-center text-white">Smart Vehicle Management</div>
    <div class="row d-flex justify-content-start">
        <div class="col-1" style="margin-top:25px;">
            <div class="sidenav text-white" style="background: #5a71c5; border-radius: 10px">
                <!-- <a class="h3 text-sidenav-le">Legend<br></a> -->
                <a><img src="assets/bus_bubble_green.png" alt=""><br>
                    <div class="text-sidenav d-flex justify-content-center"><br>Running<br></div>
                </a>
                <a><img src="assets/bus_bubble_red.png">
                    <div class="text-sidenav d-flex justify-content-center"><br>Overspeeding<br></div>
                </a>
                <a><img src="assets/bus_red.png">
                    <div class="text-sidenav d-flex justify-content-center"><br>Stopped<br></div>
                </a>
                <a><img src="assets/bus_blue.png">
                    <div class="text-sidenav d-flex justify-content-center"><br>Maintenance<br></div>
                </a>
            </div>
        </div>
        <div class="col-8">
            <div id="map" class="right-element"></div>
        </div>

        <div class="col-3">
                <div class="card" style="margin-bottom:30px;margin-top:30px; margin-right: 10px;">
                        <div class="card-body">
                            <h5 class="card-title">User Details</h5>
                            <p id="userName">Name:</p>
                            <p id="userEmail">Email:</p>
                                    <button class="btn btn-warning" onclick="logout();">
                                        Logout
                                    </button>
                </div>
                </div>
            <div class="card" style=" margin-top:30px;margin-right: 10px;">
                <div class="card-body">
                    <h5 class="card-title">Routes</h5>
                    <form id="mainForm" name="mainForm">
                        <div class="row">
                            <div class="col-4">
                                <div class="radio">
                                    <label><input type="radio" id="route1" value="route1" name="route">Route 1</label>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="radio">
                                    <label><input type="radio" id="route2" value="route2" name="route">Route 2</label>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="radio">
                                    <label><input type="radio" id="route3" value="route3" name="route">Route 3</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
        </div>



        </div>
    </div>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-firestore.js"></script>
    <script src="js/userDetails.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBp1iZsLLH53hUyU8BbNQu_2Xq6tJi3ICk",
            authDomain: "smart-fleet-tata-steel.firebaseapp.com",
            databaseURL: "https://smart-fleet-tata-steel.firebaseio.com",
            projectId: "smart-fleet-tata-steel",
            storageBucket: "smart-fleet-tata-steel.appspot.com",
            messagingSenderId: "26082732514",
            appId: "1:26082732514:web:f0aac8b3a7f2ca78"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
    <script>
        var map;
        var marker;
        function initMap() {
            var styleOptions = {
                name: "Dummy Style"
            };
            var pos = { lat: 22.7977552, lng: 86.1874132 };
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 22.785026, lng: 86.198168 },
                zoom: 14.5
            });
            var myStyle = [
                {
                    "featureType": "landscape.man_made",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "color": "#ece2d9"
                        }
                    ]
                },
                {
                    "featureType": "landscape.natural",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "visibility": "on"
                        },
                        {
                            "color": "#EBE5E0"
                        }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "all",
                    "stylers": [
                        {
                            "visibility": "on"
                        }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "all",
                    "stylers": [
                        {
                            "visibility": "on"
                        }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "color": "#ccdca1"
                        }
                    ]
                },
                {
                    "featureType": "poi.sports_complex",
                    "elementType": "all",
                    "stylers": [
                        {
                            "visibility": "on"
                        }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "hue": "#ff0000"
                        },
                        {
                            "saturation": -100
                        },
                        {
                            "lightness": 99
                        }

                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "geometry.stroke",
                    "stylers": [
                        {
                            "color": "#808080"
                        },
                        {
                            "lightness": 54
                        }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "labels.text.fill",
                    "stylers": [
                        {
                            "color": "#767676"
                        }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "labels.text.stroke",
                    "stylers": [
                        {
                            "color": "#ffffff"
                        }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "all",
                    "stylers": [
                        {
                            "saturation": 43
                        },
                        {
                            "lightness": -11
                        },
                        {
                            "hue": "#0088ff"
                        }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "visibility": "off"
                        }
                    ]
                }
                , {
                    featureType: "administrative", elementType: "labels",
                    stylers: [{ visibility: "off" }]
                },
                {
                    featureType: "poi",
                    elementType: "labels",
                    stylers: [{ visibility: "off" }]
                }, {
                    featureType: "water",
                    elementType: "labels",
                    stylers: [{ visibility: "off" }]
                }, {
                    featureType: "road", elementType: "labels",
                    stylers: [
                        { visibility: "off" }
                    ]
                },
                {
                    featureType: "airport", elementType: "labels",
                    stylers: [
                        { visibility: "off" }
                    ]
                }
            ];
            marker = new google.maps.Marker({ position: pos, map: map, icon: "assets/bus_60x40.png" });
            var mapType = new google.maps.StyledMapType(myStyle, styleOptions);
            map.mapTypes.set("Dummy Style", mapType);

            map.setMapTypeId("Dummy Style");
            var triangleCoords = [
                new google.maps.LatLng(22.79180245, 86.18749738),
                new google.maps.LatLng(22.79115952, 86.18739009),
                new google.maps.LatLng(22.79097159, 86.18711114),
                new google.maps.LatLng(22.79093202, 86.1864996),
                new google.maps.LatLng(22.79100126, 86.1843431),
                new google.maps.LatLng(22.78838008, 86.18436456),
                new google.maps.LatLng(22.78839986, 86.18559837),
                new google.maps.LatLng(22.78729202, 86.18487954),
                new google.maps.LatLng(22.78588743, 86.18474007),
                new google.maps.LatLng(22.78413662, 86.18452549),
                new google.maps.LatLng(22.78268253, 86.18513703),
                new google.maps.LatLng(22.77958637, 86.1866498),
                new google.maps.LatLng(22.77907199, 86.18673563),
                new google.maps.LatLng(22.77866641, 86.18671417),
                new google.maps.LatLng(22.77841911, 86.18668199),
                new google.maps.LatLng(22.77822127, 86.18708968),
                new google.maps.LatLng(22.77782559, 86.18727207),
                new google.maps.LatLng(22.77701443, 86.1883235),
                new google.maps.LatLng(22.77673745, 86.18800163),
                new google.maps.LatLng(22.77507555, 86.19102716),
                new google.maps.LatLng(22.77607467, 86.19207859),
                new google.maps.LatLng(22.77421491, 86.19329095),
                new google.maps.LatLng(22.77370051, 86.19304419),
                new google.maps.LatLng(22.7723947, 86.1946857),
                new google.maps.LatLng(22.76949616, 86.19918108),
                new google.maps.LatLng(22.77115813, 86.20044708),
                new google.maps.LatLng(22.77306739, 86.19797945),
                new google.maps.LatLng(22.77424459, 86.19876266),
                new google.maps.LatLng(22.77497662, 86.20192766),
                new google.maps.LatLng(22.77709357, 86.20360136),
                new google.maps.LatLng(22.77865652, 86.20440602),
                new google.maps.LatLng(22.7789335, 86.20589733),
                new google.maps.LatLng(22.77784537, 86.20916963),
                new google.maps.LatLng(22.77777613, 86.20980263),
                new google.maps.LatLng(22.7778058, 86.2116158),
                new google.maps.LatLng(22.77785526, 86.21174455),
                new google.maps.LatLng(22.77952702, 86.21148705),
                new google.maps.LatLng(22.78087233, 86.21127248),
                new google.maps.LatLng(22.78134714, 86.21148705),
                new google.maps.LatLng(22.78157465, 86.21190548),
                new google.maps.LatLng(22.78196043, 86.21220589),
                new google.maps.LatLng(22.78267264, 86.21230245),
                new google.maps.LatLng(22.78305842, 86.21278524),
                new google.maps.LatLng(22.78270232, 86.21306419),
                new google.maps.LatLng(22.78321669, 86.21366501),
                new google.maps.LatLng(22.78376073, 86.21427655),
                new google.maps.LatLng(22.7840377, 86.2144804),
                new google.maps.LatLng(22.78461142, 86.2145555),
                new google.maps.LatLng(22.78616439, 86.21454477),
                new google.maps.LatLng(22.78731181, 86.21454477),
                new google.maps.LatLng(22.78844932, 86.21451259),
                new google.maps.LatLng(22.78958682, 86.21408343),
                new google.maps.LatLng(22.79045725, 86.21363282),
                new google.maps.LatLng(22.79275199, 86.21271014),
                new google.maps.LatLng(22.79377076, 86.21237755),
                new google.maps.LatLng(22.79576872, 86.2116158),
                new google.maps.LatLng(22.79543244, 86.21037126),
                new google.maps.LatLng(22.7981425, 86.20975971),
                new google.maps.LatLng(22.79828097, 86.20876193),
                new google.maps.LatLng(22.79849856, 86.20842934),
                new google.maps.LatLng(22.79827108, 86.20767832),
                new google.maps.LatLng(22.79817217, 86.20723844),
                new google.maps.LatLng(22.79913156, 86.20701313),
                new google.maps.LatLng(22.7996162, 86.20643377),
                new google.maps.LatLng(22.80017996, 86.2053287),
                new google.maps.LatLng(22.80009095, 86.20399833),
                new google.maps.LatLng(22.80011073, 86.2007153),
                new google.maps.LatLng(22.79998215, 86.19919181),
                new google.maps.LatLng(22.7995074, 86.19914889),
                new google.maps.LatLng(22.7995074, 86.19892359),
                new google.maps.LatLng(22.79986346, 86.19892359),
                new google.maps.LatLng(22.79981401, 86.19851589),
                new google.maps.LatLng(22.79930959, 86.19535089),
                new google.maps.LatLng(22.79923047, 86.19481444),
                new google.maps.LatLng(22.79914145, 86.19135976),
                new google.maps.LatLng(22.7992008, 86.1896646),
                new google.maps.LatLng(22.79917113, 86.18565202),
                new google.maps.LatLng(22.79827108, 86.18563056),
                new google.maps.LatLng(22.79733147, 86.18504047),
                new google.maps.LatLng(22.79517527, 86.1850512),
                new google.maps.LatLng(22.79453237, 86.18509412),
                new google.maps.LatLng(22.79401804, 86.18572712),
                new google.maps.LatLng(22.79391913, 86.18626356),
                new google.maps.LatLng(22.7932861, 86.18739009),
                new google.maps.LatLng(22.7926333, 86.18752956)

            ];

            var plotpoints = new google.maps.Polygon({
                paths: triangleCoords,
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillOpacity: 0
            });
            plotpoints.setMap(map);

            map.addListener('center-changed', function(){
                window.setTimeout(function(){
                    map.panTo(22.785026, 86.198168);
                }, 1000);
            }); 
}



        var busroute;
        document.mainForm.onclick = function () {
            var routes = document.mainForm.route.value;
            if (routes == 'route1') {
                if (busroute != null) {
                    busroute.setMap(null);
                }
                var route = [
                    { lat: 22.78864, lng: 86.20719 },
                    { lat: 22.797, lng: 86.20019 },
                    { lat: 22.79854, lng: 86.1908 },
                    { lat: 22.79849, lng: 86.19794 },
                    { lat: 22.79356, lng: 86.20408 },
                    { lat: 22.79158, lng: 86.20711 },
                    { lat: 22.79194, lng: 86.21119 },
                    { lat: 22.78964, lng: 86.21222 },
                    { lat: 22.78811, lng: 86.21144 },
                    { lat: 22.78814, lng: 86.20928 },
                    { lat: 22.78814, lng: 86.20928 },
                    { lat: 22.78811, lng: 86.21144 },
                    { lat: 22.79194, lng: 86.21119 },
                    { lat: 22.79158, lng: 86.20711 },
                    { lat: 22.79356, lng: 86.20408 },
                    { lat: 22.79658, lng: 86.19853 },
                    { lat: 22.79717, lng: 86.19514 }
                ];
                busroute = new google.maps.Polyline({
                    path: route,
                    geodesic: true,
                    strokeColor: '#000111',
                    strokeOpacity: 1.0,
                    strokeWeight: 2
                });
            }
            else if (routes == 'route2') {
                if (busroute != null) {
                    busroute.setMap(null);
                }
                var route = [
                    { lat: 22.7977552, lng: 86.1874132 },
                    { lat: 22.800022, lng: 86.198168 }];
                busroute = new google.maps.Polyline({
                    path: route,
                    geodesic: true,
                    strokeColor: '#333333',
                    strokeOpacity: 1.0,
                    strokeWeight: 2
                });
            }
            else if (routes == 'route3') {
                if (busroute != null) {
                    busroute.setMap(null);
                }
                var route = [
                    { lat: 22.7977552, lng: 86.1874132 },
                    { lat: 22.810022, lng: 86.198168 }];
                busroute = new google.maps.Polyline({
                    path: route,
                    geodesic: true,
                    strokeColor: '#AAA222',
                    strokeOpacity: 1.0,
                    strokeWeight: 2
                });
            }
            busroute.setMap(map);
        }



    </script>

    <!-- bootstrap -->
    <script src="js/bootstrap.js"></script>
    <!-- jQuery library -->
    <script src="js/jquery-min.js"></script>
    <!-- popper-js -->
    <script src="js/popper-min.js"></script>
    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=
    
    AIzaSyDbaOxnzOfhcCTvgv_KWYvJMhr-NP7XnSk&callback=initMap"
        async defer></script>

    <script src="js/route-selector.js"></script>
</body>

</html>